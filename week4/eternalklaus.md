### 11. 시스템
- 생성 로직과 사용 로직을 분리
  1. main 분리: main에서 시스템에 필요한 객체를 생성하고 이를 애플리케이션에 넘긴다
  2. 의존성 주입
  3. 팩토리: 클래스의 객체를 찍어내는 일을 서브클래스에게 맡긴다.

- 관점 지향 프로그래밍
  - 횡단 관심사: 소스 A, B, C에 중복으로 들어가는 트랜잭션, 로깅, 보안 코드를 횡단 관심사로 분류해서 관점 (aspect)로 관리하는 방법
  - 관점 분리 기술
    1. 자바 프록시 : 우리가 어떤 객체를 다루는 방식을 변경하지 않고 그 객체의 행동을 제어할 수 있게 해준다. 이 때 핵심 로직은 그대로 유지되며 주변의 "횡단 관심사"(cross-cutting concerns)만 바뀌게 됨. -> 관점 분리
    2. 순수 자바 AOP프레임워크 : 내부적으로 프록시를 사용한다. 빈 생성 정보만 xml에 정의해놓으면 DI 컨테이너가 생성과 주입을 전부 처리해준다. 이를 통해 로깅, 보안 체크, 트랜잭션 관리 등의 코드를 핵심 비즈니스 로직에서 분리함

### 12. 창발성
- 모든 테스트를 실행하라
  - 결합도가 높으면 테스트케이스를 작성하기 어렵다
  - 결합도를 낮추는 법
    1. DIP와 같은 원칙을 적용
    2. 의존성 주입
    3. 인터페이스
    4. 추상화
  - 리팩터링해라. "코드를 정리하면서 시스템이 깨질까 걱정할 필요가 없다. 테스트 케이스가 있으니까!"
- 중복을 없애라
  - "이런 ‘소규모 재사용’은 시스템 복잡도를 극적으로 줄여준다." 
  - Template method 패턴: 공통 로직을 상위 클래스에서 정의하고, 그 중 변경이 필요한 부분만 하위 클래스에서 오버라이드하는 방식
- 프로그래머 의도를 표현하라
- 클래스와 메서드 수를 최소로 줄여라
- "그러므로 자신의 작품을 조금 더 자랑하자. 함수와 클래스에 조금 더 시간을 투자하자.
더 나은 이름을 선택하고, 큰 함수를 작은 함수 여럿으로 나누고, 자신의 작품에 조금만 더 주의를 기울이자. 주의는 대단한 재능이다"

### 13. 동시성
- 단일 책임 원칙
  - 동시성 코드는 독자적인 개발, 변경, 조율 주기가 있다.
  - 잘못 구현한 동시성 코드는 별의별 방식으로 실패한다.
- 동기화하는 부분을 작게 만들어라
  - 락은 스레드를 지연시키고 부하를 가중시킨다.
  - synchronized 를 남발하면 안된다.
- 스레드 코드 테스트하기
  - 문제를 노출하는 테스트 케이스를 작성하라. 프로그램 설정과 시스템 설정과 부하를 바꿔가며 자주 돌려라.
  - 테스트가 실패하면 원인을 추적하라. 다시 돌렸더니 통과하더라는 이유로 그냥 넘어가면 절대로 안 된다.
  - 말이 안 되는 실패는 잠정적인 스레드 문제로 취급하라: 다중 스레드 코드는 때때로 말이 안 되는 오류를 일으킨다.
- 프로세서 수보다 많은 스레드를 돌려보라
  - 시스템이 스레드를 스와핑(swapping)할 때도 문제가 발생한다.

